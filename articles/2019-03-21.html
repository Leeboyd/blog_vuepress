<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>NGINX Tuning - 效能提升 | DEV.Boy</title>
    <meta name="description" content="Think twice, code once.">
    <link rel="icon" href="/blog_vuepress/assets/img/icon.png">
    
    <link rel="preload" href="/blog_vuepress/assets/css/0.styles.655d990b.css" as="style"><link rel="preload" href="/blog_vuepress/assets/js/app.c16370cc.js" as="script"><link rel="preload" href="/blog_vuepress/assets/js/11.2305f366.js" as="script"><link rel="prefetch" href="/blog_vuepress/assets/js/10.a3bf57f3.js"><link rel="prefetch" href="/blog_vuepress/assets/js/12.d914188e.js"><link rel="prefetch" href="/blog_vuepress/assets/js/13.57cea0c3.js"><link rel="prefetch" href="/blog_vuepress/assets/js/14.dfd715d5.js"><link rel="prefetch" href="/blog_vuepress/assets/js/15.9b71fef1.js"><link rel="prefetch" href="/blog_vuepress/assets/js/2.3b2c723b.js"><link rel="prefetch" href="/blog_vuepress/assets/js/3.2922585c.js"><link rel="prefetch" href="/blog_vuepress/assets/js/4.7fd15097.js"><link rel="prefetch" href="/blog_vuepress/assets/js/5.d19ad4b7.js"><link rel="prefetch" href="/blog_vuepress/assets/js/6.c84ca870.js"><link rel="prefetch" href="/blog_vuepress/assets/js/7.7ea9c63e.js"><link rel="prefetch" href="/blog_vuepress/assets/js/8.a87e3793.js"><link rel="prefetch" href="/blog_vuepress/assets/js/9.60ab9a27.js">
    <link rel="stylesheet" href="/blog_vuepress/assets/css/0.styles.655d990b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog_vuepress/" class="home-link router-link-active"><img src="/blog_vuepress/assets/img/logo.png" alt="DEV.Boy" class="logo"> <span class="site-name can-hide">DEV.Boy</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog_vuepress/articles/" class="nav-link router-link-active">Articles</a></div><div class="nav-item"><a href="/blog_vuepress/diary.html" class="nav-link">Diary</a></div><div class="nav-item"><a href="/blog_vuepress/about.html" class="nav-link">About</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog_vuepress/articles/" class="nav-link router-link-active">Articles</a></div><div class="nav-item"><a href="/blog_vuepress/diary.html" class="nav-link">Diary</a></div><div class="nav-item"><a href="/blog_vuepress/about.html" class="nav-link">About</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog_vuepress/articles/2019-03-21.html" class="active sidebar-link">Table of Content</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#摘要" class="sidebar-link">摘要</a></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#gzip" class="sidebar-link">Gzip</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#設定範例" class="sidebar-link">設定範例</a></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#directives-說明" class="sidebar-link">Directives 說明</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#client-端-cache" class="sidebar-link">client 端 cache</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#設定範例-2" class="sidebar-link">設定範例</a></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#directives-說明-2" class="sidebar-link">Directives 說明 [^3]</a></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#運作方式" class="sidebar-link">運作方式</a></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#強制更新" class="sidebar-link">強制更新</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#server-端-cache" class="sidebar-link">server 端 cache</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#設定範例-3" class="sidebar-link">設定範例</a></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#directives-說明-3" class="sidebar-link">Directives 說明[^4]</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#測試" class="sidebar-link">測試</a></li><li class="sidebar-sub-header"><a href="/blog_vuepress/articles/2019-03-21.html#參考資料" class="sidebar-link">參考資料</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="nginx-tuning-效能提升"><a href="#nginx-tuning-效能提升" aria-hidden="true" class="header-anchor">#</a> NGINX Tuning - 效能提升</h1> <h5 id="tags-nginx-cache"><a href="#tags-nginx-cache" aria-hidden="true" class="header-anchor">#</a> tags: <code>nginx</code>, <code>cache</code></h5> <h2 id="摘要"><a href="#摘要" aria-hidden="true" class="header-anchor">#</a> 摘要</h2> <p>Ｎginx 除了用於 web server，也可用於做到 reverse proxy, load balancer, and HTTP cache.</p> <p>適當地調整 nginx configuration，可提升效能以及減少主機負擔。</p> <p>本文將針對以下項目進行調整與説明：</p> <ul><li>Gzip</li> <li>client 端 cache</li> <li>server 端 cache</li></ul> <h2 id="gzip"><a href="#gzip" aria-hidden="true" class="header-anchor">#</a> Gzip</h2> <p>使用 Gzip 壓縮 可以節省流量，加速用戶端的回應速度，提升使用者體驗，但是 trade-off 就是會增加額外的 CPU 運算量。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p> <h3 id="設定範例"><a href="#設定範例" aria-hidden="true" class="header-anchor">#</a> 設定範例</h3> <p>找到 <code>nginx.conf</code> 檔案並編輯，預設會在 <code>/etc/nginx/nginx.conf</code></p> <div class="language-sh line-numbers-mode"><pre class="language-text"><code>  ##
  # Gzip Setting
  ##

  gzip on;
  gzip_types text/plain application/json;
  gzip_proxied any;
  gzip_disable &quot;msie6&quot;;
  gzip_min_length 1024;
  gzip_comp_level 3;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">使用 Nginx Container 的場合</p> <ul><li>docker exec -it nginx /bin/sh</li> <li>vi /etc/nginx/nginx.conf</li></ul></div> <h3 id="directives-說明"><a href="#directives-說明" aria-hidden="true" class="header-anchor">#</a> Directives 說明</h3> <div class="tip custom-block"><p class="custom-block-title">1. gzip</p> <p>Syntax:	gzip on | off;</p> <p>Default:	
gzip off;</p> <p>Context:	http, server, location, if in location</p></div> <p>預設情況下，Nginx 的 Gzip 是關閉的，設定為 <code>on</code> 後，nginx 將對 reponse 進行壓縮</p> <div class="tip custom-block"><p class="custom-block-title">2. gzip_types</p> <p>Syntax:	gzip_types mime-type ...;</p> <p>Default:	
gzip_types text/html;</p> <p>Context:	http, server, location</p></div> <p>開啟 gzip 後，預設只對 <code>text/html</code> 進行壓縮，如果要對其他類型的 MIME 壓縮。需要搭配 gzip_types 自行添加，比如：</p> <ul><li><code>＊</code> , 一律壓縮</li> <li>添加要壓縮的類型，<code>text/plain</code>, <code>text/css</code>,  <code>application/x-javascript</code>,  <code>application/javascript</code>, <code>application/xml</code></li> <li>如果要對圖片壓縮，可用 <code>image/jpeg</code> <code>image/gif</code> <code>image/png</code></li></ul> <div class="tip custom-block"><p class="custom-block-title">3. gzip_proxied</p> <p>Syntax:	gzip_proxied off | expired | no-cache | no-store | private | no_last_modified | no_etag | auth | any ...;</p> <p>Default:	
gzip_proxied off;</p> <p>Context:	http, server, location</p></div> <p>如果 nginx 做為前端的反向代理，設定 <code>any</code> 的話，會對後端/上游 server 返回的 response 一律進行壓縮。</p> <p>其他設定細節，我就沒有研究了。</p> <div class="tip custom-block"><p class="custom-block-title">4. gzip_disable</p> <p>Syntax:	gzip_disable regex ...;</p> <p>Default:	—</p> <p>Context:	http, server, location</p> <p>This directive appeared in version 0.6.23.</p></div> <p>根據請求中的 <code>User-Agent</code> 欄位判斷需不需要 gzip，像設定 <code>&quot;msie6&quot;</code> 等價於 <code>&quot;MSIE [4-6]\.&quot;</code> （正則表達），也就是 IE6 以下一律不做 Gzip，防止瀏覽器出現錯誤。</p> <div class="tip custom-block"><p class="custom-block-title">5. gzip_min_length</p> <p>Syntax:	gzip_min_length length;</p> <p>Default:	
gzip_min_length 20;</p> <p>Context:	http, server, location</p></div> <p>根據 <code>Content-Length</code> 判斷要不要壓縮，如果小於設定的數字，則不需要壓縮。 Rule of thumb 是 1k，寫成 gzip_min_length 1k;</p> <div class="tip custom-block"><p class="custom-block-title">6. gzip_comp_level</p> <p>Syntax:	gzip_comp_level level;</p> <p>Default:	
gzip_comp_level 1; # 1~9</p> <p>Context:	http, server, location</p></div> <p>設定壓縮比的等級，壓縮比小處理速度快，壓縮比大處理慢，Rule of thumb 是設定 3 即可。</p> <h2 id="client-端-cache"><a href="#client-端-cache" aria-hidden="true" class="header-anchor">#</a> client 端 cache</h2> <p>如果能夠快取及重複使用先前取得的資源，減少到遠端取得內容的次數，可縮短瀏覽器處理內容的時間，並節省傳輸費用。<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p> <p><img src="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/images/http-request.png?hl=zh-tw" alt></p> <table><thead><tr><th style="text-align:center"><strong>Cache-Control</strong></th> <th style="text-align:center"><strong>說明</strong></th></tr></thead> <tbody><tr><td style="text-align:center"><code>max-age=120</code></td> <td style="text-align:center">瀏覽器和任何中繼快取都可以快取回應，時限為 120 秒</td></tr></tbody></table> <h3 id="設定範例-2"><a href="#設定範例-2" aria-hidden="true" class="header-anchor">#</a> 設定範例</h3> <p>以 <code>Cache-Control</code> header 為例：</p> <div class="language-sh line-numbers-mode"><pre class="language-text"><code>  # 請求 / 位址時，如果請求資源為以下幾種，則快取時限為 30 天
  # Cache-Control: max-age=2592000
  location / {
    if ($request_uri ~* &quot;.(ico|css|js|gif|jpe?g|png)$&quot;) {
      expires 30d;
    }
  }

  # 也可以使用 map 根據不同情況判定
  map $sent_http_content_type $expires {
    default         off;
    application/pdf 42d;
    ~image/         max;
  }

  # 在不同的 block，可以取用到 map 的 $expires 變數
  expires $expires;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="directives-說明-2"><a href="#directives-說明-2" aria-hidden="true" class="header-anchor">#</a> Directives 說明 <sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></h3> <div class="tip custom-block"><p class="custom-block-title">1. expires</p> <p>Syntax:	expires [modified] time;</p> <p>expires epoch | max | off;</p> <p>Default:	
expires off;</p> <p>Context:	http, server, location, if in location</p></div> <p>根據 expires 給定的時間，影響 <code>Cache-Control</code> header 的行爲：</p> <ul><li>負值 — <code>Cache-Control: no-cache</code></li> <li>大於等於 0 — <code>Cache-Control: max-age=t</code>, t 以秒計</li> <li>epoch - 等價於 expires Thu, 01 Jan 1970 00:00:01 GMT，而 <code>Cache-Control: no-cache</code>.</li> <li>max - 給你 10 年</li></ul> <div class="tip custom-block"><p class="custom-block-title">2. add_header</p> <p>Syntax:	add_header name value [always];</p> <p>Default:	—</p> <p>Context:	http, server, location, if in location</p></div> <p>Cache-Control 除了使用 nginx expires 提供 max-age 資訊外，也可以額外使用 add_header 進行覆寫預設行為：</p> <pre><code>  add_header Cache-Control private/public no-cache/no-store max-age=t;
</code></pre> <ul><li>public</li></ul> <p>判斷這個 response 可不可以快取，因為 max-age 已經告訴你這個 response 要快取多久，所以這個設定可有可無。</p> <ul><li>private</li></ul> <p>只允許瀏覽器可以快取，但是 CDN 不能快取。</p> <ul><li>no-cache</li></ul> <p>並不是不快取，瀏覽器會先與 server 確認這個資源是否有變更（如 ETag 驗證），如果資源沒有任何變更，則瀏覽器會避免下載。</p> <ul><li>no-store</li></ul> <p>則是直接禁止瀏覽器快取儲存任何 response，例如含有個人隱私資料或銀行資料。</p> <div class="tip custom-block"><p class="custom-block-title">3. etag</p> <p>Syntax:	etag on | off;</p> <p>Default:	
etag on;</p> <p>Context:	http, server, location</p></div> <p>產生 token 給用戶端，供給判斷資源是否已變更，不需要額外設定，預設已開啟</p> <h3 id="運作方式"><a href="#運作方式" aria-hidden="true" class="header-anchor">#</a> 運作方式</h3> <p>再次參考圖片</p> <p><img src="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/images/http-request.png?hl=zh-tw" alt></p> <p>在第一次請求過 120 秒後，用戶端又想對 server 發新的請求時，用戶端會先去看之前的回應是否過期，發現已超過 120 秒，於是又再一次發請求，重新下載一次檔案。</p> <p>如果這個檔案還是一樣，為什麼用戶端不直接用原本快取的檔案就好？</p> <p>這就是 ETag 要解決的問題：nginx 會產生並回傳一個 token 給用戶端，通常是檔案的 hash。用戶端只需要在下一個請求時將其夾帶給 server，如果 ETag 仍然一致，說明資源未被修改，就不須重新下載。</p> <h3 id="強制更新"><a href="#強制更新" aria-hidden="true" class="header-anchor">#</a> 強制更新</h3> <p>在開發時，當開發者提交了 CSS 的更新到 server 上，我希望我能夠及時看到變化，但我 nginx 設定 expires 1d，在瀏覽器快取的版本過期以前都會一直使用舊版 CSS。</p> <ul><li>對於開發者，</li></ul> <p>你可以打開 chrome 瀏覽器的開發者模式，按住 <code>option</code>，再對 <code>重新整理</code> 按右鍵選擇清除快取並重新載入。</p> <p><img src="https://i.imgur.com/l9Yfb5A.png" alt></p> <ul><li>對於你的用戶，</li></ul> <p>實際上，只能透過變更資源網址，強制使用者下載新的。例如在檔案名稱中嵌入 hash，例如 style.x234dff.css 即可，搭配 webpack 可以自動在打包時做到此需求。</p> <h2 id="server-端-cache"><a href="#server-端-cache" aria-hidden="true" class="header-anchor">#</a> server 端 cache</h2> <p>除了 client 端的 cache，nginx 做為反向代理，也可以利用 cache 減少打到後端/上游 server 的請求數量。</p> <h3 id="設定範例-3"><a href="#設定範例-3" aria-hidden="true" class="header-anchor">#</a> 設定範例</h3> <div class="language-sh line-numbers-mode"><pre class="language-text"><code>http {
  proxy_cache_path /tmp/nginx levels=1:2 keys_zone=slowfile_cache:10m inactive=60m use_temp_path=off;

  # include /etc/nginx/conf.d/*.conf;
  server {
    location / {
      proxy_cache_key &quot;$request_uri&quot;;
      proxy_cache slowfile_cache;
      proxy_cache_valid 200 302 5m;
      proxy_cache_valid 404      1m;
      proxy_ignore_headers Cache-Control X-Accel-Redirect X-Accel-Expires X-Accel-Limit-Rate X-Accel-Buffering X-Accel-Charset Expires Set-Cookie Vary;
      add_header X-Proxy-Cache $upstream_cache_status;

      proxy_pass http://node-cluster;
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="directives-說明-3"><a href="#directives-說明-3" aria-hidden="true" class="header-anchor">#</a> Directives 說明<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></h3> <ol><li><p>首先設定 cache 檔案的存放位置以及相關資訊，</p> <pre><code> proxy_cache_path /tmp/nginx levels=1:2 keys_zone=slowfile_cache:10m inactive=60m use_temp_path=off;
</code></pre></li></ol> <ul><li><p>path: 本機快取存放的路徑，在此設定 <code>/tmp/nginx</code></p></li> <li><p>levels: 快取儲存的資料夾層級，如果全部快取都放在 <code>/tmp/nginx</code> 下，效率肯定不好，Rule of thumb 是放兩層 <code>levels=1:2</code>。</p></li> <li><p>keys_zone=slowfile_cache:10m：</p></li></ul> <p>在記憶體中規劃一塊區域來存 cache 的 key 和 metadata，讓 nginx 快速判斷 request 是否在 cache 中，1m 可以放 8000 個 keys，10m 可以放 80000 個。我把這個區域叫 <code>slowfile_cache</code>。<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></p> <ul><li><p>inactive: 設定未被存取檔案在 cache 要保留多久，預設是 10 分鐘，時間超過都沒人存取，就會刪除。</p></li> <li><p>use_temp_path: 如果設 off，則 nginx 會將暫存檔直接寫入指定的 cache 路徑中，而不是存到額外指定的 <a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_temp_path" target="_blank" rel="noopener noreferrer">proxy_temp_path<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，官方建議 off，避免檔案在系統中有多份拷貝。</p></li></ul> <ol start="2"><li><p>接著，在想套用的 reverse proxy 的 location 啟用 proxy cache，指定 key_zone</p> <pre><code> proxy_cache slowfile_cache;
</code></pre></li> <li><p>其中的細節設定：</p></li></ol> <ul><li><p>proxy_cache_key: 定義 cache 的 key 名</p></li> <li><p>proxy_cache_valid: 可以全部套用，也可以針對不同狀態碼給定不同 cache 時間</p> <p>proxy_cache_valid 200 302 5m; proxy_cache_valid 404 1m;</p></li> <li><p>proxy_ignore_headers: Disables processing of certain response header fields from the proxied server，如果從 後端/上游 server 返回的 response 有這些 header 就不 cache。</p></li></ul> <h2 id="測試"><a href="#測試" aria-hidden="true" class="header-anchor">#</a> 測試</h2> <p>當設定完成後，別忘了先檢驗有沒有錯誤，使用</p> <pre><code>    nginx -t
</code></pre> <p>nginx 會很貼心的提醒你哪邊有錯誤。</p> <div class="tip custom-block"><p class="custom-block-title">使用 Nginx Container 的場合</p> <ul><li>docker exec -it nginx /bin/sh</li> <li>nginx -t</li> <li>control + P + Q # 離開但不會停止 container</li> <li>docker-compose restart nginx</li></ul></div> <p>設定前，設定後比較，client 端使用了 cache，減少了大量的頁面載入時間，在大檔案尤其明顯
<img src="https://i.imgur.com/jGXzsZ1.png" alt></p> <h2 id="參考資料"><a href="#參考資料" aria-hidden="true" class="header-anchor">#</a> 參考資料</h2> <hr class="footnotes-sep"> <section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="http://nginx.org/en/docs/http/ngx_http_gzip_module.html" target="_blank" rel="noopener noreferrer">Module ngx_http_gzip_module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li> <li id="fn2" class="footnote-item"><p><a href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching?hl=zh-tw" target="_blank" rel="noopener noreferrer">HTTP 快取<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li> <li id="fn3" class="footnote-item"><p><a href="http://nginx.org/en/docs/http/ngx_http_headers_module.html" target="_blank" rel="noopener noreferrer">Module ngx_http_headers_module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="#fnref3" class="footnote-backref">↩︎</a></p></li> <li id="fn4" class="footnote-item"><p><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html" target="_blank" rel="noopener noreferrer">Module ngx_http_proxy_module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="#fnref4" class="footnote-backref">↩︎</a></p></li> <li id="fn5" class="footnote-item"><p><a href="https://www.jianshu.com/p/625c2b15dad5" target="_blank" rel="noopener noreferrer">Nginx Proxy Cache原理和最佳实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="#fnref5" class="footnote-backref">↩︎</a></p></li></ol></section></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/blog_vuepress/assets/js/app.c16370cc.js" defer></script><script src="/blog_vuepress/assets/js/11.2305f366.js" defer></script>
  </body>
</html>
