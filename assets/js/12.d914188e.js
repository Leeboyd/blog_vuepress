(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{66:function(t,e,s){"use strict";s.r(e);var r=s(0),n=Object(r.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("設定完基本的 nginx 之後，該如何有效的提升自己架設的伺服器安全性強度？ Qualys SSL Labs 的 "),s("a",{attrs:{href:"https://www.ssllabs.com/ssltest/",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL Server Test"),s("OutboundLink")],1),t._v(" 提供了清楚易懂的測試及服務，針對伺服器的安全性給予 A ~ F 的評價，詳細評分原則請參考文件"),t._m(3)]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),s("p",[t._v("如果有用 nginx hosting 網頁的話，這部分列出一些常用的安全性 header，關於這些 header 可參考 "),s("a",{attrs:{href:"https://www.owasp.org/index.php/OWASP_Secure_Headers_Project",target:"_blank",rel:"noopener noreferrer"}},[t._v("OWASP Secure Headers Project"),s("OutboundLink")],1)]),t._v(" "),t._m(10),t._v(" "),s("p",[t._v("避免瀏覽器誤判 MIME 格式, 防止 Content-Type 被竄改")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),s("p",[t._v("現代瀏覽器基本都具備的 XSS 處理功能，這是給較舊版瀏覽器偵測到 XSS 攻擊如何反應的設定，")]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),s("p",[t._v("NGINX 的 HTTPS (SSL/TLS) 設定，在之前的文章 "),s("router-link",{attrs:{to:"/articles/2019-03-05.html"}},[t._v("HTTPS 設定")]),t._v("，展示了使用 certbox + Let's Encrypt 的方法，這裡將介紹如何使用老方法。")],1),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),s("p",[t._v("Nginx 不能設置 intermediate cert，因此需要把 intermediate cert 和 cert 合併。")]),t._v(" "),t._m(26),t._v(" "),t._m(27),t._m(28),t._v(" "),s("p",[t._v("基本的 HTTPS 傳輸設置完畢，但離部署上線還有需要設定的部分，接下來才是重點。")]),t._v(" "),t._m(29),t._v(" "),t._m(30),t._m(31),t._v(" "),s("p",[t._v("不使用瀏覽器端的加密，以 server 端優先，避免老舊且不安全的ciphers，如 SSLv3")]),t._v(" "),t._m(32),s("p",[t._v("以上是共用設定，故拉到 http block。")]),t._v(" "),t._m(33),t._v(" "),s("p",[t._v("這會強制 Domain 下所有內容都走 HTTPS，也省去了 301 重導向的功，但請自行評估：")]),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),s("p",[t._v("Diffie-Hellman 演算法在於確保第一次建立連線時，金鑰交換過程的安全，達到 "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Forward_secrecy",target:"_blank",rel:"noopener noreferrer"}},[t._v("Perfect Forward Secrecy"),s("OutboundLink")],1),t._v(" 的要求")]),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),s("p",[t._v("此屬於共用設定，置於 http block")]),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),s("p",[t._v("此屬於共用設定，置於 http block")]),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),s("p",[t._v("加密強化後，與 HTTP 相比，每次交握時間變長，透過讓有效時間延長，減少交握的次數\n，於 http block 將原本的 60 -> 75")]),t._v(" "),t._m(45),t._v(" "),t._m(46),t._v(" "),s("p",[t._v("啟用 cache 機制，延長 SSL/TLS session 的時間，連續的每個請求，不需一直重新建立 session，而是會沿用，直到過期。")]),t._v(" "),s("p",[t._v("此屬於共用設定，置於 http block")]),t._v(" "),t._m(47),t._v(" "),t._m(48),t._v(" "),t._m(49),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),s("hr",{staticClass:"footnotes-sep"}),t._v(" "),s("section",{staticClass:"footnotes"},[s("ol",{staticClass:"footnotes-list"},[s("li",{staticClass:"footnote-item",attrs:{id:"fn1"}},[s("p",[s("a",{attrs:{href:"https://github.com/ssllabs/research/wiki/SSL-Server-Rating-Guide",target:"_blank",rel:"noopener noreferrer"}},[t._v("SSL Server Rating Guide"),s("OutboundLink")],1),t._v(" "),s("a",{staticClass:"footnote-backref",attrs:{href:"#fnref1"}},[t._v("↩︎")])])]),t._v(" "),s("li",{staticClass:"footnote-item",attrs:{id:"fn2"}},[s("p",[s("a",{attrs:{href:"http://nginx.org/en/docs/http/configuring_https_servers.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configuring HTTPS servers"),s("OutboundLink")],1),t._v(" "),s("a",{staticClass:"footnote-backref",attrs:{href:"#fnref2"}},[t._v("↩︎")])])]),t._v(" "),s("li",{staticClass:"footnote-item",attrs:{id:"fn3"}},[s("p",[s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/OCSP%E8%A3%85%E8%AE%A2",target:"_blank",rel:"noopener noreferrer"}},[t._v("OCSP Stapling"),s("OutboundLink")],1),t._v(" "),s("a",{staticClass:"footnote-backref",attrs:{href:"#fnref3"}},[t._v("↩︎")])])])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"nginx-tuning-安全性提升"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx-tuning-安全性提升","aria-hidden":"true"}},[this._v("#")]),this._v(" NGINX Tuning - 安全性提升")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"tags-nginx-https-ssl-tls"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tags-nginx-https-ssl-tls","aria-hidden":"true"}},[this._v("#")]),this._v(" tags: "),e("code",[this._v("nginx")]),this._v(", "),e("code",[this._v("https")]),this._v(", "),e("code",[this._v("SSL/TLS")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"前言"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[this._v("#")]),this._v(" 前言")])},function(){var t=this.$createElement,e=this._self._c||t;return e("sup",{staticClass:"footnote-ref"},[e("a",{attrs:{href:"#fn1",id:"fnref1"}},[this._v("[1]")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("本文是個人以 NGINX 為主的操作過程紀錄，僅供學習，實際操作請以官方文件為主"),e("sup",{staticClass:"footnote-ref"},[e("a",{attrs:{href:"#fn2",id:"fnref2"}},[this._v("[2]")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("add_header")]),t._v(" "),s("li",[t._v("enable HTTPS connection")]),t._v(" "),s("li",[t._v("HTTP redirect")]),t._v(" "),s("li",[t._v("使用 server 端加密")]),t._v(" "),s("li",[t._v("HSTS")]),t._v(" "),s("li",[t._v("Larger Diffie-Hellman Prime")]),t._v(" "),s("li",[t._v("OCSP stapling")]),t._v(" "),s("li",[t._v("使用者體驗優化")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"在開始之前"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在開始之前","aria-hidden":"true"}},[this._v("#")]),this._v(" 在開始之前...")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("所有的操作皆需要有 "),e("code",[this._v("root")]),this._v(" 權限，或具有 "),e("code",[this._v("sudo")]),this._v(" 存取權限。")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[s("p",[t._v("請先確認 nginx 版本")]),t._v(" "),s("pre",[s("code",[t._v(" nginx -v\n")])])]),t._v(" "),s("li",[s("p",[t._v("備份設定檔")]),t._v(" "),s("pre",[s("code",[t._v(" cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.back\n")])])]),t._v(" "),s("li",[s("p",[t._v("設定完後測試")]),t._v(" "),s("pre",[s("code",[t._v(" nginx -t\n")])]),t._v(" "),s("p",[t._v("檢查是否有 typo, 如: 少了分號, 不合法的 directives 等等")])]),t._v(" "),s("li",[s("p",[t._v("重啟")]),t._v(" "),s("pre",[s("code",[t._v(" $ service nginx restart\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"add-header"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add-header","aria-hidden":"true"}},[this._v("#")]),this._v(" add_header")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("X-Content-Type-Options")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("    add_header X-Content-Type-Options nosniff;\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"2"}},[e("li",[this._v("X-Frame-Options")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("是否允許被其他網站用 "),e("code",[this._v("iframe")]),this._v(" 嵌入，避免 Clickjacking，比如說用個按鈕蓋在 iframe 上，讓使用者誤擊。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('    add_header X-Frame-Options "DENY";\n    # 選項：DENY, SAMEORIGIN\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"warning custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("選項：DENY")]),this._v(" "),e("p",[this._v("如果使用了 "),e("code",[this._v("DENY")]),this._v("，就算兩個互嵌網頁都是自己的 domain，也不會正確顯示喔")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"3"}},[e("li",[this._v("X-XSS-Protection")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v('    add_header X-XSS-Protection "1; mode=block";\n')])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("1")]),this._v(" 開啟 XSS 過濾功能，")]),this._v(" "),e("li",[e("code",[this._v("mode=block")]),this._v(" 偵測到 XSS 攻擊，瀏覽器不渲染頁面")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),e("p",[this._v("add_header 這個 directives 並不會繼承，所以常見的做法是放在 server block，針對你的應用給對應的 header")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#https","aria-hidden":"true"}},[this._v("#")]),this._v(" HTTPS")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("SSL/TLS")]),this._v(" "),e("p",[this._v("兩者都是用於 server 之間的認證，以及確保傳輸安全性，")]),this._v(" "),e("p",[this._v("SSL: Secure Socket Layer")]),this._v(" "),e("p",[this._v("TLS: Transport Layer Security，為 SSL 的繼任者，修正了漏洞，並提供 Forward Secrecy, HSTS, 以及與 OpenSSL 的相容性。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"enable-tls-for-https-connections"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#enable-tls-for-https-connections","aria-hidden":"true"}},[this._v("#")]),this._v(" Enable TLS for HTTPS Connections")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[e("p",[this._v("使用 OpenSSL 產生 Private Key 及 CSR")]),this._v(" "),e("pre",[e("code",[this._v(" $ openssl req -nodes -newkey rsa:2048 -sha256 -keyout my_domain.key -out my_domain.csr\n")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[this._v("限制私鑰權限")]),this._v(" "),e("p",[this._v("chmod 400 my_domain.key")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"2"}},[e("li",[e("p",[this._v("把 CSR 貼入至購買憑證的網站上，申請 intermediate cert 和 cert 回來。")])]),this._v(" "),e("li",[e("p",[this._v("合併，避免 Chain issues")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"4"}},[e("li",[this._v("編輯 nginx")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# /etc/nginx/conf.d/my_domain.conf\nserver {\n  listen 443 ssl;\n  listen [::]:443 ssl;\n  ssl_certificate /${path_to_cert}/my_domain.crt;\n  ssl_certificate_key /${path_to_key}/my_domain.key;\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"強化安全性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#強化安全性","aria-hidden":"true"}},[this._v("#")]),this._v(" 強化安全性")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"http-重導向-https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-重導向-https","aria-hidden":"true"}},[this._v("#")]),this._v(" HTTP 重導向 HTTPS")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server {\n  listen 80;\n  listen [::]:80;\n  server_name my_domain.com www.my_domain.com;\n  return 301 https://$server_name$request_uri;\n}\n\nserver {\n  listen 443 ssl;\n  listen [::]:443 ssl;\n  ssl_certificate /${path_to_cert}/my_domain.crt;\n  ssl_certificate_key /${path_to_key}/my_domain.key;\n  server_name my_domain.com www.my_domain.com;\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"一律使用-server-端的加密"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一律使用-server-端的加密","aria-hidden":"true"}},[this._v("#")]),this._v(" 一律使用 server 端的加密")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("http {\n  ssl_prefer_server_ciphers on;                                # 使用 server 端的加密套件\n  ssl_ciphers EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH; # 加密套件\n  # ssl_protocols TLSv1 TLSv1.1 TLSv1.2;                       # 加密 protocol，此為預設值\n}\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br"),e("span",{staticClass:"line-number"},[this._v("3")]),e("br"),e("span",{staticClass:"line-number"},[this._v("4")]),e("br"),e("span",{staticClass:"line-number"},[this._v("5")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"啟用-http-strict-transport-security-hsts"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#啟用-http-strict-transport-security-hsts","aria-hidden":"true"}},[this._v("#")]),this._v(" 啟用 HTTP Strict Transport Security (HSTS)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("p",[this._v("網站將不能以 HTTP 連線")])]),this._v(" "),e("li",[e("p",[this._v("如果憑證過期了，網站將無法存取")])]),this._v(" "),e("li",[e("p",[this._v("瀏覽器如果判定網站是不安全的，使用者不再被允許忽略警告")]),this._v(" "),e("pre",[e("code",[this._v('  add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;\n')])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"larger-diffie-hellman-prime"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#larger-diffie-hellman-prime","aria-hidden":"true"}},[this._v("#")]),this._v(" Larger Diffie-Hellman Prime")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("如果 SSL Labs 回報： "),e("mark",[this._v("This server supports weak Diffie-Hellman (DH) key exchange parameters. Grade capped to B.")]),this._v(" ，\n通常是 Diffie-Hellman 預設質數長度不夠的問題，")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("    openssl genpkey -genparam -algorithm DH -out /${path_to_keep_your_key}/dhparam4096.pem -pkeyopt dh_paramgen_prime_len:4096\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("產生出來的 "),e("code",[this._v("dhparams4096.pem")]),this._v(" 請同 private key 一樣好好保管，並設置檔案的 owner, group 以及權限。")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("    ssl_dhparam /{path_to_keep_your_key}/dhparam4096.pem;\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"ocsp-stapling"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ocsp-stapling","aria-hidden":"true"}},[this._v("#")]),this._v(" OCSP Stapling")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("根據維基百科，伺服器在TLS握手時發送事先緩存的OCSP響應，用戶只需驗證該響應的有效性而不用再向數位證書認證機構（CA）發送請求。"),e("sup",{staticClass:"footnote-ref"},[e("a",{attrs:{href:"#fn3",id:"fnref3"}},[this._v("[3]")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("    ssl_stapling on;\n    ssl_stapling_verify on;\n    ssl_trusted_certificate /{path_to_keep_your_key}/cert.crt;\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"使用者體驗優化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用者體驗優化","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用者體驗優化")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"延長-handshake-keepalive-時間"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#延長-handshake-keepalive-時間","aria-hidden":"true"}},[this._v("#")]),this._v(" 延長 handshake keepalive 時間")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("    keepalive_timeout 75;\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"increase-tls-session-duration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#increase-tls-session-duration","aria-hidden":"true"}},[this._v("#")]),this._v(" Increase TLS Session Duration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",[e("code",[this._v("    ssl_session_cache shared:SSL:10m;\n    ssl_session_timeout 10m;\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"完整-nginx-conf-設置範例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#完整-nginx-conf-設置範例","aria-hidden":"true"}},[this._v("#")]),this._v(" 完整 nginx.conf 設置範例")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('http {\n  keepalive_timeout 75;\n\n  ##\n  # Https global setting\n  ##\n  ssl_prefer_server_ciphers on;\n  ssl_ciphers EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH;\n  # ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n  ssl_session_timeout 10m;\n  ssl_dhparam /{path_to_keep_your_key}/dhparam4096.pem;\n\n  ##\n  # OCSP Stapling\n  ##\n  ssl_stapling on;\n  ssl_stapling_verify on;\n  ssl_trusted_certificate /{path_to_keep_your_key}/cert.crt;\n\n  # include /etc/nginx/conf.d/*.conf\n\n  server {\n    listen 80;\n    listen [::]:80;\n    server_name my_domain.com www.my_domain.com;\n    return 301 https://$server_name$request_uri;\n  }\n\n  server {\n    listen 443 ssl;\n    listen [::]:443 ssl;\n    ssl_certificate /${path_to_cert}/my_domain.crt;\n    ssl_certificate_key /${path_to_key}/my_domain.key;\n    server_name my_domain.com www.my_domain.com;\n\n    ##\n    # security header\n    ##\n    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;\n    add_header X-Frame-Options "DENY";\n    add_header X-XSS-Protection "1; mode=block";\n  }\n}\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"測試報告"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#測試報告","aria-hidden":"true"}},[this._v("#")]),this._v(" 測試報告")])},function(){var t=this.$createElement,e=this._self._c||t;return e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[this._v("調整前，僅做基本設定")]),this._v(" "),e("th",{staticStyle:{"text-align":"center"}},[this._v("調整後")])])]),this._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[e("img",{attrs:{src:"https://i.imgur.com/kjan5VI.jpg",alt:""}})]),this._v(" "),e("td",{staticStyle:{"text-align":"center"}},[e("img",{attrs:{src:"https://i.imgur.com/A5fpA4T.jpg",alt:""}})])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"參考資料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#參考資料","aria-hidden":"true"}},[this._v("#")]),this._v(" 參考資料")])}],!1,null,null,null);e.default=n.exports}}]);